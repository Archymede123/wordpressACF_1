{"version":3,"sources":["App.module.scss","display-elements/FileInfo.module.scss","display-elements/PriceDisplay.module.scss","display-elements/TimeDisplay.module.scss","style/img/upload-icon.png","forms/Button.module.scss","forms/UploadField.module.scss","display-elements/FileInfo.js","display-elements/PriceDisplay.js","constants.js","display-elements/TimeDisplay.js","forms/TimePickerField.js","forms/UploadField.js","server.js","times.js","pricing.js","forms/Button.js","display-elements/Step.js","App.js","utils.js","serviceWorker.js","index.js","forms/TimePickerField.module.scss","display-elements/Step.module.scss"],"names":["module","exports","App","Header","Step1","Step2","Step3","UploadingContainer","UploadMessage","FileInfo","Price","PriceTime","Help","Slider","Continue","Error","Holder","Container","Outline","DragPrompt","Accept","flash","Button","Grow","Reject","ProgressHolder","ProgressBar","Uploading","_ref","path","words","name","basename","react_default","a","createElement","className","styles","index_es","id","defaultMessage","values","PriceDisplay","price","accounting","formatMoney","localeFormatTweaks","en","calendar","sameElse","fr","weekdays","split","timezone","allowedUploadTypes","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain","text/richtext","TimeDisplay","time","locale","sameDay","nextDay","lastDay","nextWeek","TimePickerField","render","_this$props","_this","props","input","marks","max","onBeforeChange","onAfterChange","value","es","Object","assign","trackStyle","backgroundColor","railStyle","Tips","Fast","Cheap","Component","UploadField","this","accept","handleError","handleFile","uploading","progress","disabled","dist_es","acceptClassName","rejectClassName","onDropRejected","onDropAccepted","react","style","width","src","fileImg","alt","React","defaultProps","socket","io","settingsCache","server","feathers","configure","socketio","timeout","loadSettings","asyncToGenerator","regenerator_default","mark","_callee","serverSettings","wrap","_context","prev","next","service","find","query","key","sent","reduce","b","abrupt","stop","apply","arguments","settings","getDayStart","dayStart","getDayEnd","dayEnd","getHoursInDay","state","startOfDay","moment","tz","set","endOfDay","duration","diff","asHours","addBusinessHours","length","undefined","amount","clone","hoursInDay","isoWeekday","add","days","isBefore","isSameOrAfter","subtract","hours","isAfter","getEarliestTime","extendBy","searchTime","by","method","Math","round","getMaxDuration","extendAfter","ceil","minLength","generateMarks","fastSymbol","slowSymbol","nightSymbol","currentTime","latestTime","earliestTime","getLatestTime","0","steps","minutes","increments","isSameOrBefore","timeFromIncrements","mustStartTime","deadline","mst","cachedPrice","getPrice","maxTime","pricing","asMinutes","details","previous","priceBreaks","toConsumableArray","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","multiplier","uplift","margin","err","return","getPriceDetailsForMST","pricePerWord","basePrice","number","factor","pow","tempNumber","getMinPrice","minFastPrice","minSlowPrice","children","onClick","Step","title","content","Title","Number","TitleText","Content","file","error","setState","intl","formatMessage","acceptedFiles","request","post","attach","on","event","percent","end","response","message","body","FileContainer","Dropzone","handleClick","document","cookie","concat","window","location","href","_this2","_calculatedValues","_generateMarks","start","calculatedValues","display_elements_Step","forms_UploadField","keys","toString","display_elements_FileInfo","display_elements_PriceDisplay","display_elements_TimeDisplay","forms_TimePickerField","meta","onChange","injectIntl","Boolean","hostname","match","addLocaleData","format","constants","then","ReactDOM","messages","lang","src_App","getElementById","catch","fontFamily","navigator","serviceWorker","ready","registration","unregister","slider","bounce"],"mappings":"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","file":"static/js/main.e9611ead.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2lytX\",\"Header\":\"App_Header__3jkzR\",\"Step1\":\"App_Step1__2DA8d\",\"Step2\":\"App_Step2__21OzW\",\"Step3\":\"App_Step3__2DIFs\",\"UploadingContainer\":\"App_UploadingContainer__2UOBO\",\"UploadMessage\":\"App_UploadMessage__39RFB\",\"FileInfo\":\"App_FileInfo__3Rw_5\",\"Price\":\"App_Price__yhFk2\",\"PriceTime\":\"App_PriceTime__2hGCi\",\"Help\":\"App_Help__eIzBx\",\"Slider\":\"App_Slider__29nd7\",\"Continue\":\"App_Continue__3oQ2B\",\"Error\":\"App_Error__3ol6k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Holder\":\"FileInfo_Holder__3KO98\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"PriceDisplay_Container__35VZx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"TimeDisplay_Container__3rdoo\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAQCAYAAAAS7Y8mAAAAAXNSR0IArs4c6QAAAjxJREFUOBGVVF1IFFEUPufO6K41tbqIkruYUqyR0g9BBBpYT+G21sv20kuvkbb6ENLbKgT5ELGGzz3082IvIexDP5BBpEaEEP1sGYRuD63gT0Q1OzOney/ONJOzg56Hued+5/u+mXNm7iiwyWhPZ7VQ+2Fl7d20sRkJBpFazg60lHVjAAjOEdAuQLS44DMhPNJYaLgweWOpkr6icVOyrxcsuseFmp8YEVcYsAsL+bGHvnU/sDmV6TJMcwqImF/dxrj5LwTlxGI+N2Nj9qraiVh567V6uXzKMI3rvH2P6Z5Yg6TOF787EiKqATTvcCDhgOuJM4pYsv8ib/0mn2Xof5IwnRjNSDg9lAO3uQCZyroXJ29NuXWK2MSTl4aIm/LU04Go2aaN0QhoNWHo6ToET2bewvKPn6IsgwiO7dx7NFqfOP515dPLVQGy3am+VrIgKxk+l1hDFB48/TdCkQvME0T7eKcjOv2ei5++3CNqzDQxRQBhD9G1ef7mAzx7/d5BRC4wv+A+EbLMu629mUbVAjrgR3Jjf3QDiqVlCYk8KPhY6nTDOC9mWgoidh5MgKoocCV3X9K0bWEQ2Iu5QoAMO1SG+Mrit6kU9ZEdUF3lfad6OfipkXABu7NZtTC7NM0Pw5FK5lvECRXolN9x85n+/aZOj/mbbdqiyUY6wti3/HhGfserH2dLdW0nbxPotfxHI45YZKMiEOH/JZhnDK8W8+PXBNM5eW5ZPD0YtXTc7saC8nB11dqXiVF5MGzeX6Mow//21QIRAAAAAElFTkSuQmCC\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Outline\":\"Button_Outline__69mNc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DragPrompt\":\"UploadField_DragPrompt__1aH3X\",\"Accept\":\"UploadField_Accept__o3X77\",\"flash\":\"UploadField_flash__1x7Uq\",\"Button\":\"UploadField_Button__2iO5W\",\"Grow\":\"UploadField_Grow__2q3Sc\",\"Reject\":\"UploadField_Reject__1gh3o\",\"Error\":\"UploadField_Error__2UNll\",\"ProgressHolder\":\"UploadField_ProgressHolder__3yajX\",\"ProgressBar\":\"UploadField_ProgressBar__PoswE\",\"Uploading\":\"UploadField_Uploading__9_fRO\"};","import React from 'react';\r\nimport { basename } from 'path';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\n\r\nimport styles from './FileInfo.module.scss';\r\n\r\n\r\nconst FileInfo = ({ path, words }) => {\r\n  const name = basename(path);\r\n\r\n  return (\r\n    <div className={styles.Holder}>\r\n      <dl>\r\n        <dt>Votre fichier :</dt>\r\n        <dd>{name}</dd>\r\n        <dt>Nombre de mot :</dt>\r\n        <dd><FormattedMessage\r\n          id=\"Order.Words\"\r\n          defaultMessage={'{words, number} {words, plural, one {word} other {words}}'}\r\n          values={{ words }}\r\n        /></dd>\r\n      </dl>\r\n    </div>);\r\n};\r\n\r\nexport default FileInfo;\r\n","import React from 'react';\r\nimport accounting from 'accounting';\r\nimport styles from './PriceDisplay.module.scss';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nconst PriceDisplay = ({ price }) => (\r\n  <dl className={styles.Container}>\r\n    <dt><FormattedMessage id=\"Order.Confirm.Price\"/></dt>\r\n    <dd>{accounting.formatMoney(price, '', 2, '.', ',')} ‎€</dd>\r\n  </dl>\r\n);\r\n\r\nexport default PriceDisplay;\r\n","export const locale = 'fr';\r\nexport const localeFormatTweaks = {\r\n  en: {\r\n    calendar: {\r\n      sameElse: 'dddd Do [at] LT',\r\n    },\r\n  },\r\n  fr: {\r\n    weekdays: 'Dimanche_Lundi_Mardi_Mercredi_Jeudi_Vendredi_Samedi'.split('_'),\r\n    calendar: {\r\n      sameElse: 'dddd Do [à] LT',\r\n    },\r\n  },\r\n};\r\nexport const timezone = 'Europe/Paris';\r\n\r\n// See https://technet.microsoft.com/en-us/library/ee309278(office.12).aspx\r\nexport const allowedUploadTypes = {\r\n  'application/msword': 'msword',\r\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document': 'msword',\r\n  'application/vnd.ms-excel': 'msexcel',\r\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'msexcel',\r\n  'application/vnd.ms-powerpoint': 'mspowerpoint',\r\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation': 'mspowerpoint',\r\n  'text/plain': 'text',\r\n  'text/richtext': 'text',\r\n};\r\n\r\nexport const tax = 0.2;\r\n\r\n\r\n","import React from 'react';\r\nimport styles from './TimeDisplay.module.scss';\r\nimport { locale } from '../constants';\r\n\r\nconst TimeDisplay = ({ time }) => {\r\n  time.locale(locale);\r\n  return (\r\n    <dl className={styles.Container}>\r\n      <dt>Livraison</dt>\r\n      <dd>{time.calendar(null, {\r\n        sameDay: (locale === 'fr') ? '[Aujourd\\'hui a] LT' : '[Today at] LT',\r\n        nextDay: (locale === 'fr') ? '[Demain a] LT' : '[Tomorrow at] LT',\r\n        lastDay: (locale === 'fr') ? '[Hier a] LT' : '[Yesterday at] LT',\r\n        nextWeek: (locale === 'fr') ? 'dddd [a] LT' : 'dddd [at] LT',\r\n        sameElse: 'DD/MM/YYYY',\r\n      })}</dd>\r\n    </dl>\r\n  );\r\n};\r\n\r\nexport default TimeDisplay;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Slider from 'rc-slider';\r\nimport styles from './TimePickerField.module.scss';\r\nimport './rc-slider.scss';\r\n\r\nclass TimePickerField extends Component {\r\n\r\n  static propTypes = {\r\n    input: PropTypes.object.isRequired,\r\n    marks: PropTypes.object,\r\n    max: PropTypes.number,\r\n    meta: PropTypes.object,\r\n    tooltip: PropTypes.object,\r\n    onBeforeChange: PropTypes.func,\r\n    onAfterChange: PropTypes.func,\r\n  };\r\n\r\n  render = () => {\r\n    const { input, marks, max, onBeforeChange, onAfterChange } = this.props;\r\n\r\n    if (!input.value) input.value = 0;\r\n    return (\r\n      <div className={styles.Container}>\r\n        <div className=\"section-slider__slider\">\r\n          <Slider\r\n            marks={marks}\r\n            max={max}\r\n            onBeforeChange={onBeforeChange}\r\n            onAfterChange={onAfterChange}\r\n            trackStyle={{backgroundColor: '#F6446B'}}\r\n            railStyle={{backgroundColor: '#1A496B'}}\r\n            {...input}\r\n          />\r\n        </div>\r\n        <div className={styles.Tips}>\r\n          <span className={styles.Fast}>Rapide</span>\r\n          <span className={styles.Help}>Faites glisser le curseur</span>\r\n          <span className={styles.Cheap}>Economique</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n}\r\n\r\nexport default TimePickerField;\r\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './UploadField.module.scss';\nimport Dropzone from 'react-dropzone';\nimport { FormattedMessage } from 'react-intl';\nimport fileImg from '../style/img/upload-icon.png';\n\nclass UploadField extends React.Component {\n  static propTypes = {\n    accept: PropTypes.string,\n    handleFile: PropTypes.func,\n    handleError: PropTypes.func,\n    uploading: PropTypes.bool,\n    progress: PropTypes.number,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    accept: '',\n    handleFile: () => {\n    },\n    handleError: () => {\n    },\n    uploading: false,\n    progress: 0,\n    disabled: false,\n  };\n\n  render() {\n    const { accept, className, handleError, handleFile, uploading, progress, disabled } = this.props;\n    return <Dropzone\n      accept={accept}\n      className={className}\n      acceptClassName={styles.Accept}\n      rejectClassName={styles.Reject}\n      onDropRejected={handleError}\n      onDropAccepted={handleFile}\n      disabled={disabled}\n    >\n      {uploading ? <Fragment>\n        <div className={styles.ProgressHolder}>\n          <span className={styles.ProgressBar} style={{ width: progress + '%' }}/>\n        </div>\n        <div className={styles.Uploading}><FormattedMessage id=\"Order.Uploading\"/></div>\n      </Fragment> : <Fragment>\n          <div className={styles.DragPrompt}><img src={fileImg} alt=\"fichier\" /><p>Déposez votre<br /> fichier à traduire <br />ici</p></div>\n        <p className={styles.Grow}>ou</p>\n        <div className={styles.Button}><p>ajouter un fichier</p></div>\n      </Fragment>}\n    </Dropzone>;\n  }\n}\n\nexport default UploadField;\n","import feathers from '@feathersjs/client';\nimport io from 'socket.io-client';\n\nconst socket = io();\nlet settingsCache = {};\n\n// Configure feathers-client\nconst server = feathers().configure(feathers.socketio(socket, { timeout: 20000 }));\nexport const loadSettings = async () => {\n  const serverSettings = await server.service('settings').find({\n    query: {\n      key: [\n        'dayStart',\n        'dayEnd',\n        'minLength',\n        'increments',\n        'searchTime',\n        'extendAfter',\n        'extendBy',\n        'searchTime',\n        'bigJob',\n        'basePrice',\n        'priceBreaks',\n        'minFastPrice',\n        'minSlowPrice',\n      ],\n    },\n  });\n  if (serverSettings) {\n    settingsCache = serverSettings.reduce((a, b) => {\n      a[b.key] = b.value;\n      return a;\n    }, {});\n    return settingsCache;\n  }\n};\n\n\nexport const settings = () => {\n  return settingsCache;\n};\n\nexport const getDayStart = () => settings().dayStart;\nexport const getDayEnd = () =>  settings().dayEnd;\nexport const getWeekend = () => false;\n\nexport default server;\n","import moment from 'moment-timezone';\r\nimport { timezone } from './constants';\r\nimport { settings, getDayEnd, getDayStart, getWeekend } from './server';\r\n\r\n/**\r\n * Gets the number of hours in the date, from the state object\r\n * @param state\r\n * @returns {*}\r\n */\r\nfunction getHoursInDay(state) {\r\n  let startOfDay = moment.tz(timezone).set(getDayStart(state));\r\n  let endOfDay = moment.tz(timezone).set(getDayEnd(state));\r\n\r\n  return moment.duration(endOfDay.diff(startOfDay)).asHours();\r\n}\r\n\r\nfunction round(duration, by, method) {\r\n  return moment.duration(Math[method]((+duration) / (+by)) * (+by));\r\n}\r\n\r\n/**\r\n * Adds time, taking in consideration for business hours\r\n * @param state - state, for settings\r\n * @param time - the start time\r\n * @param amount - the amount to add\r\n * @returns {*}\r\n */\r\nexport const addBusinessHours = (state, time = null, amount = null) => {\r\n  time = time ? moment.tz(time, timezone) : moment.tz(timezone);\r\n\r\n  //time.startOf('minute'); // we're not going to care about seconds yet\r\n  let startOfDay = time.clone().set(getDayStart(state));\r\n  let endOfDay = time.clone().set(getDayEnd(state));\r\n\r\n  const skipWeekend = !getWeekend(state);\r\n\r\n  const hoursInDay = moment.duration(endOfDay.diff(startOfDay)).asHours();\r\n\r\n  //Move out of the weekend\r\n  if (time.isoWeekday() >= 6 && skipWeekend) {\r\n    time = time.add({ days: 8 - time.isoWeekday() });\r\n  }\r\n\r\n  //Normalise the start time to French working hours\r\n  if (time.isBefore(startOfDay)) {\r\n    time = startOfDay;\r\n\r\n  }\r\n  if (time.isSameOrAfter(endOfDay)) {\r\n    time = startOfDay.clone().add({ days: 1 });\r\n    if (time.isoWeekday() >= 6 && skipWeekend) {\r\n      time = time.add({ days: 8 - time.isoWeekday() });\r\n    }\r\n  }\r\n  //Now add the time to it, and check the hours again\r\n\r\n  if (amount) {\r\n    amount = moment.duration(amount);\r\n    while (amount.asHours() >= hoursInDay) {\r\n      time.add({ days: 1 });\r\n      if (time.isoWeekday() >= 6 && skipWeekend) {\r\n        time = time.add({ days: 8 - time.isoWeekday() });\r\n      }\r\n      amount.subtract({ hours: hoursInDay });\r\n    }\r\n    time.add(amount);\r\n  }\r\n\r\n  endOfDay = time.clone().set(getDayEnd(state));\r\n\r\n  if (time.isAfter(endOfDay)) {\r\n    time = addBusinessHours(state, time, moment.duration(time.diff(endOfDay)));\r\n  }\r\n  //If it's a weekend, add some days.\r\n  if (time.isoWeekday() >= 6 && skipWeekend) {\r\n    time = time.add({ days: 8 - time.isoWeekday() });\r\n  }\r\n\r\n  return time;\r\n};\r\n\r\nexport const getEarliestTime = (state, words, time = null) => {\r\n  // combine the start delay and the time it takes to translate\r\n  const duration = moment.duration({ hours: (words * settings(state).extendBy) + settings(state).searchTime });\r\n\r\n  // round up to the nearest half hour and fit them into business time\r\n  return addBusinessHours(state, time, round(duration, moment.duration(30, 'minutes'), 'ceil'));\r\n};\r\n\r\nexport const getMaxDuration = (state, words) => {\r\n  const hours = words > settings(state).extendAfter ?\r\n    (words - settings(state).extendAfter) * settings(state).extendBy :\r\n    0;\r\n  return moment.duration({ hours: Math.ceil(hours) + (settings(state).minLength * getHoursInDay(state)) });\r\n};\r\n\r\nexport const getLatestTime = (state, words, time = null) => {\r\n  const earliestTime = getEarliestTime(state, words, time);\r\n  const duration = getMaxDuration(state, words);\r\n\r\n  return addBusinessHours(state, earliestTime, duration);\r\n};\r\n\r\nexport const generateMarks = (state, words, fastSymbol, slowSymbol, nightSymbol, time = null) => {\r\n  let currentTime = getEarliestTime(state, words, time);\r\n  const latestTime = getLatestTime(state, words, time);\r\n\r\n  let marks = { 0: fastSymbol };\r\n  let steps = 0;\r\n  do {\r\n    let nextTime = addBusinessHours(state, currentTime, { minutes: settings().increments });\r\n    steps++;\r\n    currentTime = nextTime;\r\n  } while (currentTime.isSameOrBefore(latestTime));\r\n  marks[--steps] = slowSymbol;\r\n\r\n  return { marks: marks, max: steps };\r\n};\r\n\r\nexport const timeFromIncrements = (state, increments, time = null) => {\r\n  while (increments-- > 0) {\r\n    time = addBusinessHours(state, time, { minutes: settings().increments });\r\n  }\r\n  return time;\r\n};\r\n\r\nexport const mustStartTime = (state, deadline, words, time = null) => {\r\n  deadline = addBusinessHours(state, deadline);\r\n  time = addBusinessHours(state, time);\r\n  let endOfDay = time.clone().set(getDayEnd(state));\r\n  const hoursInDay = getHoursInDay(state);\r\n\r\n  let mst = moment.duration();\r\n  while (endOfDay.isBefore(deadline)) {\r\n    mst.add(endOfDay.diff(time));\r\n    time = addBusinessHours(state, time.clone().set(getDayStart(state)), { hours: hoursInDay });\r\n    endOfDay = time.clone().set(getDayEnd(state));\r\n  }\r\n  mst.add(deadline.diff(time));\r\n\r\n  return mst.subtract({ hours: (words * settings(state).extendBy) + settings(state).searchTime });\r\n};\r\n","import { settings } from './server';\r\nimport { getMaxDuration } from './times';\r\n\r\nexport const MAX = 9007199254740991;\r\n\r\nlet cachedPrice = {};\r\n\r\nexport function wordCount(text) {\r\n  return text ? text.match(/\\S+/g).length : 0;\r\n}\r\n\r\nexport const getPriceDetailsForMST = (state, mst, words) => {\r\n  const minutes = mst.asMinutes();\r\n\r\n  if (cachedPrice[minutes]) {\r\n    return cachedPrice[minutes];\r\n  }\r\n  let priceBreaks = [...settings(state).priceBreaks];\r\n  let details;\r\n  let previous;\r\n\r\n  //Loop through price breaks until we find a MST break bigger than the current;\r\n  for (let next of priceBreaks) {\r\n    //Normalise down from infinity to something reasonable\r\n    if (next.mst === MAX) next.mst = getMaxDuration(state, words).asMinutes();\r\n\r\n    if (next.mst === minutes) {\r\n      previous = Object.assign({}, next);\r\n    } else if (next.mst > minutes) {\r\n      details = Object.assign({}, next); //Take a copy of the pricebreak details so we can modify it\r\n      if (previous) {\r\n        // do some smoothing based on the difference between now and the previous\r\n        const multiplier = (minutes - previous.mst) / (next.mst - previous.mst);\r\n        details.uplift = previous.uplift - ((previous.uplift - next.uplift) * multiplier);\r\n        details.margin = previous.margin - ((previous.margin - next.margin) * multiplier);\r\n      }\r\n      cachedPrice[minutes] = details;\r\n      return details;\r\n    } else {\r\n      previous = Object.assign({}, next); //Do nothing, but remember this for later\r\n    }\r\n  }\r\n  //We got to the end of the price breaks, most likely by just being over the new max\r\n  cachedPrice[minutes] = previous;\r\n  return previous;\r\n};\r\n\r\nexport const round = (number) => {\r\n  const factor = Math.pow(10, 2);\r\n  const tempNumber = number * factor;\r\n  const roundedTempNumber = Math.round(tempNumber);\r\n  return roundedTempNumber / factor;\r\n};\r\n\r\nexport const getPrice = (state, mst, words, time, maxTime) => {\r\n  const pricing = getPriceDetailsForMST(state, mst, words);\r\n  const pricePerWord = settings(state).basePrice + settings(state).basePrice * pricing.uplift;\r\n  return round(Math.max(words * pricePerWord, getMinPrice(state, time, maxTime)));\r\n};\r\n\r\nexport const getMinPrice = (state, time, maxTime) => (((maxTime - time) / maxTime) *\r\n  (settings(state).minFastPrice - settings(state).minSlowPrice)) + settings(state).minSlowPrice;\r\n","import React from 'react';\nimport styles from './Button.module.scss';\n\nexport default ({ children, onClick }) => (\n  <div onClick={onClick} className={styles.Outline}>{children}</div>\n)\n","import React from 'react';\n\nimport styles from './Step.module.scss';\n\nconst Step = ({number, title, content}) => (\n  <div className={styles.Container}>\n    <div className={styles.Title}>\n      <p className={styles.Number}>{number}</p><p className={styles.TitleText}>{title}</p>\n    </div>\n    <p className={styles.Content}>{content}</p>\n  </div>\n);\n\nexport default Step;\n","import React, { Component } from 'react';\r\nimport { FormattedMessage, injectIntl, intlShape } from 'react-intl';\r\nimport request from 'superagent';\r\n\r\nimport styles from './App.module.scss';\r\n\r\nimport FileInfo from './display-elements/FileInfo';\r\nimport PriceDisplay from './display-elements/PriceDisplay';\r\nimport TimeDisplay from './display-elements/TimeDisplay';\r\nimport TimePickerField from './forms/TimePickerField';\r\nimport UploadField from './forms/UploadField';\r\n\r\nimport { allowedUploadTypes, locale } from './constants';\r\nimport { calculatedValues } from './utils';\r\nimport Button from './forms/Button';\r\nimport Step from './display-elements/Step';\r\n\r\nclass App extends Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired,\r\n  };\r\n\r\n  state = {\r\n    file: \"87096a61765db56baf052e3c7204632fc0a41e797dc16db17dc7c56ee27e6294/monfichierdetraduction.docx\",\r\n    uploading: false,\r\n    progress: 0,\r\n    words: 200,\r\n    error: null,\r\n    time: 40,\r\n  };\r\n  handleError = () => {\r\n    this.setState({ error: this.props.intl.formatMessage({ id: 'Order.MobileFile.UnacceptedType' }) });\r\n  };\r\n\r\n  handleFile = (acceptedFiles) => {\r\n    if (acceptedFiles.length) {\r\n      const file = acceptedFiles[0];\r\n      this.setState({ uploading: true });\r\n\r\n      request.post('/uploads')\r\n             .attach('uri', file, file.name)\r\n             .on('progress', event => {\r\n               this.setState({ progress: event.percent });\r\n             })\r\n             .end((error, response) => {\r\n               if (error) {\r\n                 this.setState({\r\n                   file: null,\r\n                   error: error.message,\r\n                   progress: 0,\r\n                   uploading: false,\r\n                 });\r\n               } else {\r\n                 this.setState({\r\n                   error: null,\r\n                   progress: 0,\r\n                   words: response.body.words,\r\n                   file: response.body.id,\r\n                   uploading: false,\r\n                 });\r\n               }\r\n             });\r\n    }\r\n  };\r\n\r\n  className = () => {\r\n    if (this.state.uploading) {\r\n      return styles.UploadingContainer;\r\n    }\r\n\r\n    if (this.state.file) {\r\n      return styles.FileContainer;\r\n    }\r\n\r\n    return styles.Dropzone;\r\n  };\r\n\r\n  handleClick = () => {\r\n    document.cookie = `quotedOrderFile=${this.state.file}; domain=mybrian.fr; path=/;`;\r\n    document.cookie = `quotedOrderTime=${this.state.time}; domain=mybrian.fr; path=/;`;\r\n    window.location.href = 'https://client.mybrian.fr/order/new';\r\n  };\r\n\r\n  render() {\r\n    const { marks, max, start, deadline, price } = calculatedValues(this.state.time, this.state.words);\r\n    deadline.locale(locale);\r\n    return (\r\n      <div className={styles.App}>\r\n        <div className={styles.Header}>\r\n          <h3>Obtenez un devis en quelques secondes</h3>\r\n        </div>\r\n        <div className={styles.Step1}>\r\n          <Step number={1} title=\"Chargez votre fichier\" content=\"Formats acceptés :  .xlsx  .pptx .docx\"/>\r\n        </div>\r\n        <div className={styles.Step2}>\r\n\r\n          <Step number={2} title=\"Choisissez le prixr\"\r\n                content=\"Faites glisser le curseur pour ajuster votre ratio temps / prix idéal\"/>\r\n        </div>\r\n        <div className={styles.Step3}>\r\n          <Step number={3} title=\"Validez votre commande\" content=\"Créez un compte et confirmez votre commande\"/>\r\n        </div>\r\n        <div className={styles.FileContainer}>\r\n          {this.state.error && <div className={styles.Error}>{this.state.error}</div>}\r\n          <UploadField\r\n            accept={Object.keys(allowedUploadTypes).toString()}\r\n            className={styles.FileInfo}\r\n            handleFile={this.handleFile}\r\n            handleError={this.handleError}\r\n            uploading={this.state.uploading}\r\n            progress={this.state.progress}\r\n          />\r\n          {!!this.state.file && <FileInfo path={this.state.file} words={this.state.words}/>}\r\n        </div>\r\n        <div className={styles.Price}>\r\n          <div className={styles.PriceTime}>\r\n          <PriceDisplay price={price}/>\r\n          <TimeDisplay time={deadline}/>\r\n          </div>\r\n          <TimePickerField\r\n            marks={marks}\r\n            max={max}\r\n            start={start}\r\n            meta={{}}\r\n            input={{\r\n              value: this.state.time,\r\n              onChange: value => this.setState({ time: value }),\r\n            }}\r\n          />\r\n\r\n        </div>\r\n\r\n\r\n        <div className={styles.Continue}>\r\n          <Button onClick={this.handleClick}>\r\n            Commander ma traduction\r\n          </Button>\r\n        </div>\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(App);\r\n","import { getPrice } from './pricing';\nimport {\n  generateMarks,\n  getEarliestTime,\n  mustStartTime,\n  timeFromIncrements,\n} from './times';\n\nexport function calculatedValues(time, words = null) {\n  const state = null;\n  const { marks, max } = generateMarks(state, words);\n  const start = getEarliestTime(state, words);\n  const deadline = timeFromIncrements(state, time, start);\n  const mst = mustStartTime(state, deadline, words);\n  const price = getPrice(state, mst, words, time, max);\n  return {\n    words,\n    marks,\n    max,\n    start,\n    deadline,\n    price,\n  };\n}\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport 'intl';\r\n/* eslint-disable-line import/default */\r\nimport 'intl/locale-data/jsonp/fr';\r\nimport 'moment/locale/fr';\r\nimport fr from 'react-intl/locale-data/fr';\r\nimport 'babel-polyfill';\r\n/* eslint-disable-line import/default */\r\nimport moment from 'moment';\r\nimport { addLocaleData, FormattedMessage, IntlProvider } from 'react-intl';\r\nimport lang from 'mybrian-common/lang';\r\n\r\nimport './index.css';\r\nimport './style/icomoon/style.css';\r\nimport './style/roboto/index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport * as constants from './constants';\r\nimport { loadSettings } from './server';\r\n\r\naddLocaleData([...fr]);\r\nconst locale = constants.locale;\r\nconst { format } = constants.localeFormatTweaks[locale] || undefined;\r\nmoment.locale(locale, format);\r\n\r\nloadSettings().then(() => {\r\n  ReactDOM.render(\r\n    <IntlProvider locale={locale}\r\n                  messages={lang.fr}>\r\n      <App/>\r\n    </IntlProvider>,\r\n    document.getElementById('root'));\r\n}).catch(() => {\r\n  ReactDOM.render(<IntlProvider locale={locale}\r\n                                messages={lang.fr}>\r\n    <div style={{fontFamily: \"Arial, sans-serif\"}}>\r\n      <FormattedMessage id=\"Error.Error.detail\"/>\r\n    </div>\r\n    </IntlProvider>,\r\n    document.getElementById('root'));\r\n});\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"TimePickerField_Container__dUDYA\",\"Tips\":\"TimePickerField_Tips__gb-AY\",\"Fast\":\"TimePickerField_Fast__3mRXF\",\"Cheap\":\"TimePickerField_Cheap__2SOOi\",\"slider\":\"TimePickerField_slider__3PXKN\",\"bounce\":\"TimePickerField_bounce__2OEjK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Step_Container__wHBft\",\"Title\":\"Step_Title__3GiJu\",\"Number\":\"Step_Number__1QvLN\",\"TitleText\":\"Step_TitleText__1_fYQ\",\"Content\":\"Step_Content__3IwdX\"};"],"sourceRoot":""}